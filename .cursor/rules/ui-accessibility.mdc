---
description: Accessibility (a11y) patterns and WCAG compliance guidelines
globs:
  - 'src/components/**/*.tsx'
  - 'src/app/**/*.tsx'
---

# Accessibility (a11y) Best Practices

## Built-in Accessibility with shadcn/ui
shadcn/ui components have **built-in accessibility** via Radix UI:
- Automatic ARIA attributes
- Keyboard navigation support
- Focus management
- Screen reader compatibility

## Maintaining Accessibility When Customizing

**When customizing shadcn/ui components, preserve accessibility:**
```typescript
// Good: Preserve Radix UI's accessibility props
<Button {...props} className={cn(baseStyles, className)}>
  {children}
</Button>

// Bad: Don't override accessibility attributes
<Button role="something-else"> {/* Don't do this */}
  {children}
</Button>
```

## Custom Component Accessibility

### Semantic HTML
Use appropriate HTML elements:
- `<button>` for actions
- `<nav>`, `<header>`, `<main>`, `<footer>` for structure
- `<a>` for navigation
- Never use `<div onClick>` when `<button>` is appropriate

### Heading Hierarchy
Maintain logical heading structure (h1 → h2 → h3):
- Don't skip levels (h1 → h3)
- One h1 per page
- Headings reflect content structure, not visual style

### ARIA Labels and Descriptions
Add ARIA attributes when semantic HTML isn't enough:

```typescript
// Icon button without text
<button aria-label="Close dialog" onClick={onClose}>
  <X className="h-4 w-4" />
</button>

// Decorative images
<img src="/decoration.png" alt="" role="presentation" />

// Complex widgets
<div role="tablist" aria-label="Account settings">
  {/* Tab content */}
</div>
```

### Keyboard Navigation
Ensure all interactive elements work with keyboard:

**Key shortcuts:**
- `Tab` / `Shift + Tab` - Navigate
- `Enter` - Activate buttons/links
- `Space` - Activate buttons
- `Escape` - Close dialogs/modals
- Arrow keys - Navigate within components (lists, tabs)

**Pattern:**
```typescript
// Good: Handles both click and keyboard
<div
  role="button"
  tabIndex={0}
  onClick={handleAction}
  onKeyDown={(e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      handleAction()
    }
  }}
>
  Custom Button
</div>

// Better: Use native button element
<button onClick={handleAction}>Native Button</button>
```

### Color Contrast
Maintain WCAG AA minimum contrast ratios:
- Normal text: 4.5:1
- Large text (18pt+ or 14pt+ bold): 3:1
- UI components and graphics: 3:1

Test with [WebAIM Contrast Checker](https://webaim.org/resources/contrastchecker/)

### Focus Indicators
Ensure visible focus states:
```typescript
// Clear focus indicator
<button className="focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2">
  Accessible Button
</button>

// Tailwind default focus styles are accessible
<button className="focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring">
  Button with focus
</button>
```

### Screen Reader Support
Provide context for screen reader users:

```typescript
// Loading state
<button disabled aria-busy="true">
  <Loader2 className="animate-spin" />
  <span className="sr-only">Loading...</span>
</button>

// Live regions for dynamic content
<div aria-live="polite" aria-atomic="true">
  {statusMessage}
</div>

// Visually hidden but screen reader accessible
<span className="sr-only">
  Additional context for screen readers
</span>
```

### Form Accessibility
```typescript
// Proper form labeling
<div>
  <label htmlFor="email">Email Address</label>
  <input
    id="email"
    type="email"
    aria-describedby="email-help"
    aria-invalid={hasError}
  />
  <span id="email-help">We'll never share your email</span>
  {hasError && (
    <span role="alert" className="text-red-600">
      Please enter a valid email
    </span>
  )}
</div>
```

## Accessibility Testing

### Manual Testing Checklist
- [ ] Can be navigated with keyboard only (no mouse)
- [ ] Has visible focus indicators on all interactive elements
- [ ] Includes descriptive labels and aria-labels where needed
- [ ] Maintains color contrast ratios (WCAG AA minimum)
- [ ] Works with screen readers (test with NVDA, JAWS, VoiceOver)
- [ ] Provides error feedback accessibly (role="alert")
- [ ] Forms have proper labels and error states
- [ ] Images have appropriate alt text
- [ ] Headings follow logical hierarchy

### Testing Tools
- **Browser DevTools**: Lighthouse accessibility audit
- **axe DevTools**: Browser extension for accessibility testing
- **WAVE**: Web accessibility evaluation tool
- **Screen readers**: NVDA (Windows), JAWS (Windows), VoiceOver (macOS/iOS)
- **Keyboard only**: Unplug mouse and navigate

## WCAG 2.1 AA Compliance

Key requirements:
1. **Perceivable**: Text alternatives, captions, distinguishable content (color contrast)
2. **Operable**: Keyboard accessible, enough time, no seizure-inducing content, navigable
3. **Understandable**: Readable text, predictable behavior, input assistance
4. **Robust**: Valid HTML, proper ARIA usage, works with assistive technologies

**Reference:** [WCAG 2.1 Guidelines](https://www.w3.org/WAI/WCAG21/quickref/)

## Common Accessibility Patterns

### Skip Links
Allow keyboard users to skip navigation:
```typescript
<a
  href="#main-content"
  className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4"
>
  Skip to main content
</a>

<main id="main-content">
  {/* Main content */}
</main>
```

### Modal Dialogs
- Trap focus within modal
- Restore focus when closed
- Close on Escape key
- Use shadcn Dialog component (has this built-in)

## Quick Reference

**Key Principles:**
- Use semantic HTML first
- Add ARIA only when necessary
- Test with keyboard and screen readers
- Maintain sufficient color contrast
- Preserve shadcn/ui accessibility features

**Resources:**
- [Radix UI Accessibility](https://www.radix-ui.com/primitives/docs/overview/accessibility)
- [A11y Project Checklist](https://www.a11yproject.com/checklist/)
- [WebAIM Contrast Checker](https://webaim.org/resources/contrastchecker/)
